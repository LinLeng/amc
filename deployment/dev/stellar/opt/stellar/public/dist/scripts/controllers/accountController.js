"use strict";angular.module("aerospike.stellar").controller("AccountController",["$scope","$stateParams","$cookieStore","$modal","flash","AccountService","NotificationsService",function($scope,$stateParams,$cookies,$modal,flash,Accounts,Notifications){$scope.notifications=[],$scope.account=Accounts.show().$promise.then(function(profile){$scope.notifications=Notifications.index({accountId:profile.accounts[0].id}),$scope.account=profile}),$scope.updateProfile=function(){var modalInstance=$modal.open({templateUrl:"/views/account/updateProfile.html",controller:"AccountUpdateProfileController"});modalInstance.result.then(function(){$scope.account=Accounts.show()},function(){})},$scope.changePassword=function(){var modalInstance=$modal.open({templateUrl:"/views/account/changePassword.html",controller:"AccountChangePasswordController"});modalInstance.result.then(function(){$scope.account=Accounts.show()},function(){})}}]).controller("AccountUpdateProfileController",["$scope","$stateParams","$cookieStore","$modalInstance","$location","flash","modalService","AccountService",function($scope,$stateParams,$cookies,$modalInstance,$location,flash,$modal,Accounts){$scope.user=Accounts.show();var setFailureFlash=function(message){flash.to("error-update").error=message};$scope.updateProfile=function(profileForm){Accounts.update($.param({firstName:profileForm.firstname,lastName:profileForm.lastname,organization:profileForm.organization,address:profileForm.address,mobile:profileForm.mobile,phone:profileForm.phone})).$promise.then(function(){$modalInstance.close()},function(errorMessage){setFailureFlash(errorMessage.data)})}}]).controller("AccountChangePasswordController",["$scope","$stateParams","$cookieStore","$modalInstance","flash","modalService","AccountService",function($scope,$stateParams,$cookies,$modalInstance,flash,$modal,Accounts){$scope.profile=Accounts.show(),$scope.user={};var setFailureFlash=function(message){flash.to("error-update").error=message};$scope.updateProfile=function(profileForm){Accounts.update($.param({firstName:$scope.profile.firstname,lastName:$scope.profile.lastname,organization:$scope.profile.organization,address:$scope.profile.address,mobile:$scope.profile.mobile,phone:$scope.profile.phone,oldPass:profileForm.oldPass,newPass1:profileForm.newPass1,newPass2:profileForm.newPass2})).$promise.then(function(){$modalInstance.close()},function(errorMessage){console.log("HERE!"),setFailureFlash(errorMessage.data)})}}]);