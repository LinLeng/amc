"use strict";angular.module("aerospike.stellar").controller("LoginController",["$scope","$state","$cookieStore","$modal","$modalInstance","flash","authService",function($scope,$state,$cookies,$modal,$modalInstance,flash,auth){$scope.form={},$scope.CloseModal=function(){$modalInstance.close()},$scope.register=function(){$modalInstance.close();$modal.open({templateUrl:"/views/login/register.html",controller:"LoginController"})},$scope.resetPassword=function(){$modalInstance.close();$modal.open({templateUrl:"/views/login/forgot-password.html",controller:"RequestResetPasswordController"})},$scope.performLogin=function(user){auth.login(user.email,user.password,function(){$modalInstance.close(),$state.go("dashboard.clusters")},function(error){flash.to("error-login").error=error.data})},$scope.performRegistration=function(user){auth.register(user.email,user.password,function(){flash.to("success").success="Registration was successful! Please check your email to activate your account.",$modalInstance.close()},function(error){flash.to("register-fail").error=error.data})}}]),angular.module("aerospike.stellar").controller("UserActivationController",["$scope","$location","$state","$stateParams","$cookieStore","flash","authService",function($scope,$location,$state,$stateParams,$cookies,flash,auth){$scope.message="",$scope.successful=null,auth.activate($location.search().email,$location.search().confirmation_token,function(){$scope.message="Your account was activated successfully.",flash.success="Your account was activated successfully.",auth.setupSession(function(){$scope.successful=!0,$state.go("dashboard.clusters")},function(error){$scope.message=error.data})},function(error){$scope.successful=!1,$scope.message=error.data})}]),angular.module("aerospike.stellar").controller("LogoutController",["$scope","$state","$cookieStore","authService",function($scope,$state,$cookies,auth){auth.logout(function(){$state.go("landing")})}]),angular.module("aerospike.stellar").controller("RequestResetPasswordController",["$scope","$state","$cookieStore","$modalInstance","flash","authService",function($scope,$state,$cookies,$modalInstance,flash,auth){$scope.CloseModal=function(){$modalInstance.close()},$scope.submitResetPassword=function(user){auth.requestResetPassword(user.email,function(){flash.to("success").success="An email was sent to your address with instructions regarding the password reset.",$modalInstance.close()},function(error){flash.to("error-reset").error=error.data})}}]),angular.module("aerospike.stellar").controller("ResetPasswordController",["$scope","$state","$location","flash","authService",function($scope,$state,$location,flash,auth){$scope.user={email:$location.search().email,token:$location.search().token},$scope.submitResetPassword=function(user){auth.resetPassword(user.email,user.token,user.password_new1,user.password_new2,function(){$state.go("landing")},function(){flash.to("error-reset").error=message})}}]);